# OlivaDice For OlivOS 用户手册

*For Ver.3.1.16(1026)*

> *世界是属于每一个人的。要创造一个充满逻辑并尊重每一个人的世界。*    
> *——《Новый Элемент Расселения》A.D.1960 Москва*


> 有关骰子的更多疑问欢迎前往[OlivOS论坛 - 青果铺](https://forum.olivos.run)提出

![DIXE(OLIVADICE)](_static/DIXE_OLIVADICE.jpg)

## 前言
“骰子机器人”的本质，是一个通过或非官方（QQ）协议以及工具，或官方（Telegram、开黑啦等）开放平台接口，实现的一个部分或者全部由骰子机器人软件及其控制的普通用户账号或特殊账号的集合体，而“骰子”一词则，将该集合体的目标功能，限定为服务发生于这些场景的跑团中，提供模拟掷骰的功能以及其他与跑团相关的功能。  
所以，将跑团骰子机器人与娱乐机器人等同的观点是完全错误的，如果出现了这类混淆视听的观点，请确认他们所说的是不是“骰娘”这类意义更加丰富的词，而非“骰子”。  

## 基本状态

### 查看状态
`.bot` 骰子基本状态  

作为一个被某种程度上控制的账号，在软件的核心功能发挥作用时将会有如上指令可以响应。  
在通常情况下，这个指令所回复的内容将会包含这个骰子所运行的软件的相关信息。  

### 指令退群
`.bot exit` 退群  

由于在某些平台（例如QQ），骰子机器人的搭建方法基于非官方的灰色地带的方案，所以在这些平台，直接将骰子频繁踢出群是一种容易导致账号风控（间歇性甚至完全发不出消息）或封禁的事件，而主动退出则没有这种问题，所以骰子本身提供了相关指令，可以让骰子主动退群。  

### 指令开关
`.bot on` 启用指令  
`.bot off` 停用指令  

## 查询帮助
`.help` 查看默认帮助  
`.help [查询内容]` 查询对应的帮助内容  

本指令可以进行帮助文档的查询，当你查询的内容不能准确匹配帮助文档时，将会触发模糊搜索机制，骰子会主动为你推荐相似的候选内容，所以推荐多多进行尝试。  

## 掷骰
`.r [掷骰表达式] [理由]` 掷骰子  
`.rh [掷骰表达式] [理由]` 掷暗骰  
`.r[次数]#[掷骰表达式] [理由]` 多轮掷骰  

表达式支持[OneDice标准](https://github.com/OlivOS-Team/onedice)  
基于先进的OneDice标准，你不再需要除`[.r]`指令以外的其他掷骰指令（哪怕规则书告诉你应该那么做）。  
例如：  
`[.r20a10]`等同于`[.ww20a10]`  
`[.r10c7]`等同于`[.dx10a7]`  

## 人物卡
本核心的人物卡提供了兼容多种其他核心的录入格式，并提供多人物卡，人物卡模板等，使其能够灵活的切换规则书与规则的细节。  

### 重命名
`.nn [人物卡名]` 重命名人物卡  

### 录入/批量录入
`.st [人物卡名]-[技能名][技能值][技能名][技能值]……` 以该人物卡名建卡并批量录入  
`.st [技能名][技能值][技能名][技能值]……` 人物卡批量录入  
`.st rm [技能名]` 删除对应技能  

### 显示人物卡
`.st show` 显示人物卡  

### 多人物卡
`.st list` 显示人物卡列表  
`.st set [人物卡名]` 切换人物卡  
`.st del [人物卡名]` 删除人物卡，默认删除当前人物卡  
`.st clear` 清空当前人物卡  

### 人物卡模板/规则
`.st temp [人物卡模版名]` 切换人物卡模版  

默认可选：`COC7`，`DND5E`，`FATE`  


`.st rule [人物卡模版规则名]` 切换人物卡规则  
### 人物卡作成
`.st init (force)` 人物卡作成  

将依照当前人物卡进行作成，作成前请先行切换人物卡  

## 检定
`.ra [技能名] [技能值]` 技能检定  
`.rah [技能名] [技能值]` 暗技能检定  
`.ra[次数]#[技能名] [技能值]` 多轮检定  
`.ra(b/p)[技能名] [技能值]` 奖惩检定  

## 理智检定
`.sc [成功表达式]/[失败表达式] [san值]` 理智检定  

## 成长检定
`.en [技能名] [技能值]` 成长检定  

省略技能值时将从人物卡中读取技能值  
省略技能名等时，将依据检定历史进行自动成长检定  

## 房规
`.setcoc [参数]` 为当前群或频道组设置COC房规  

如`[.setcoc 1]`, 当前参数`0-6`  

| 编号 | 规则 | 解释 |
|:-:|:-:|:--|
| 0 | C0 | 出1大成功<br/>不满50出96 - 100大失败，满50出100大失败 |
| 1 | C1 | 不满50出1大成功，满50出1 - 5大成功<br/>不满50出96 - 100大失败，满50出100大失败 |
| 2 | C2 | 出1 - 5且 <= 成功率大成功<br/>出100或出96 - 99且 > 成功率大失败 |
| 3 | C3 | 出1 - 5大成功<br/>出96 - 100大失败 |
| 4 | C4 | 出1 - 5且 <= 十分之一大成功<br/>不满50出 >= 96 + 十分之一大失败，满50出100大失败 |
| 5 | C5 | 出1 - 2且 < 五分之一大成功<br/>不满50出96 - 100大失败，满50出99 - 100大失败 |
| 6 | DeltaGreen<br/>绿色三角洲 | 小于等于检定目标成功，若结果为1或两骰相同为大成功（相当于整除11）<br/>大于检定目标失败，若结果为100或两骰相同为大失败（相当于整除11）<br/>没有极难成功/困难成功 |

如果其他房规可向开发者反馈，或是使用人物卡模板扩展系统  
群内检定会优先调用群内设置  

## 人物作成
`.coc [数量]` COC7人物作成  
`.dnd [数量]` DND5E人物作成  
推荐使用`[.st init]`指令进行人物卡作成  

## 疯狂症状
`.ti` 临时疯狂症状  
`.li` 总结疯狂症状  

## 抽牌堆
`.draw [牌堆名称]` 抽牌堆  
`.drawh [牌堆名称]` 暗抽牌堆  

## 随机姓名
`.name (cn/jp/en/enzh)`  
后接cn/jp/en/enzh则限定生成中文/日文/英文/英文中译名  

## 旁观
`.ob` 切换旁观模式  
`.ob join` 加入旁观模式  
`.ob exit` 退出旁观模式  
`.ob exit all` 退出所有已旁观  
`.ob clear` 清空本群旁观列表  

## 日志功能
`.log on` 开始记录  
`.log off` 暂停记录  
`.log end` 完成记录并发送日志文件  

日志上传存在失败可能，届时请联系后台管理索取  

## 娱乐功能

### 今日人品
`.jrrp` 今日人品  
`.zrrp` 昨日人品  
`.mrrp` 明日人品  

此功能采用源自《梅花易数》的卜算方法，以日期与八字起卦进行推演，结果仅供参考。  

### 戳一戳
在手机QQ中戳一戳可以调整为掷骰，具体要看骰主的设置，未设置时将会回复版本号。  

## 联动功能

### 魔都模组
`.cnmods roll` 在线抽取一个模组  
`.cnmods luck ([页码])` 查看魔都推荐  
`.cnmods search [名称] ([页码])` 在线查找模组  
`.cnmods get [编号]` 获取对应模组  

本模块所实现功能已获[魔都模组](https://www.cnmods.net)官方授权，特此感谢  
