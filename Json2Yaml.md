## Json2Yaml for Dice
网上跑团时进行Roll点判定的解决方案中，当前的主流方案是基于酷Q的骰子机器人，其中实现骰值的主流插件为[塔系核心(By SinaNya)](https://sinanya.com/#/)、[Dice!(By 溯洄)](https://kokona.tech/)、[Shiki系Dice!(By Shiki)](https://github.com/w4123/Dice/tree/Shiki)、MDice!(By 惠惠)等。    
牌堆功能是各类主流插件中一项可由骰主进行定制的功能，以数据序列化交换格式文件的形式进行编写，其中一部分插件采用了Json格式，而本人所使用的**塔系核心**采用了Yaml格式，因此不同插件的骰主之间进行牌堆内容的交流时出现了数据不互通与重复工作的问题，尽管目前也有Json到Yaml的在线转换器，但往往在一些细节处不尽如人意，转换生成的文件并不能直接被载入使用。    
    
**基于以上情况，本人基于Python实现了一个具有图形交互界面且针对骰子牌堆优化的转换器。**    
    
## 获取工具
请移步[Release页面](https://github.com/lunzhiPenxil/json2yaml-for-dice/releases)。

## 使用手册
### 开始之前
#### 应用场景
以下是本牌堆转换器**可以**做到的：
1. 我想将其它来自核心的Json格式牌堆文件转换为塔系核心可以正常使用的Yaml格式牌堆文件。
2. 我是由其它核心转移而来的骰主，想要完全移植之前所使用的牌堆。
3. 我是牌堆作者，我想为我所编写的牌堆生成一份Yaml格式牌堆文件。

以下是本牌堆转换器**不能**做到的：
1. 我想写一个新牌堆。
2. 我想修改现有牌堆。
3. 我想要将除Json格式以外的牌堆文件转换为塔系核心可以正常使用的Yaml格式牌堆文件。

如果您满足以上条件，那么本牌堆转换器将是一个简便快捷的工具。

#### 有何区别
Json与Yaml都是数据序列化格式，其中塔系核心采用了Yaml格式，Shiki系核心的牌堆功能采用了Json格式。
转换器主要针对Shiki系牌堆进行优化，故在此以Shiki系牌堆举例。

##### 塔系核心×Yaml
1. 每个牌堆作为一个独立的完整文件。
2. 牌堆文件具有名称、指令、作者、简述等必需项，以及子指令、默认指令等可选项。
3. 抽取指令为`.deck 指令 子指令`。
4. 子项中使用`{$xxx}`表示放回抽取，使用`{%xxx}`表示不放回抽取。
5. 放回抽取没有迭代次数上限，不放回抽取有迭代次数上限。
6. 不同牌堆文件之间不允许进行变量的交叉引用。
7. 原核心不含牌堆，但提供整套牌堆下载途径。

##### Shiki系核心×Json
1. 牌堆可以分散为多个文件，不同牌堆之间没有明显界限。
2. 牌堆只有父项与子项，并且不需要在文件中做出其它注明。
3. 抽取指令为`.draw 父项`。
4. 子项中使用`{%xxx}`表示放回抽取，使用`{xxx}`表示不放回抽取。
5. 任何抽取都没有迭代次数上限。
6. 不同牌堆文件之间可以随意进行变量的交叉引用。
7. 原核心中硬编码了部分常用牌堆。

#### 如何处理
牌堆转换器将会允许你：
1. 查看想要转换的牌堆的内部结构。
2. 自定义新的牌堆名称与指令。
3. 选择默认指令与子指令。
4. 自动解决牌堆搬运时的各类细节问题。




## 项目主页
[json2yaml-for-dice - 一个针对骰子牌堆优化的转换器](http://benzenpenxil.xyz/json2yaml-for-dice/)

## 宣传
本人的定制化骰娘小青果酱：[仑质/青果 - 依旧存在于此](http://benzenpenxil.xyz/oliva-still-here/)

## 其它
本牌堆转换器由仑质(BenzenPenxil)基于Python独立开发，在使用上遇到技术问题请加作者的群`青果批发车间(828786809)`进行沟通，或在项目的Github页面提交Issues。   
![群二维码](_static/j2y_group.jpg)